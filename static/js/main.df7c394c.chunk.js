(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(n,e,t){n.exports=t(36)},35:function(n,e,t){},36:function(n,e,t){"use strict";t.r(e);var o=t(0),r=t.n(o),a=t(14),i=t.n(a),c=t(4),u=t(11),s=t(22),d=t(23),l=function(n){return function(e){return function(t){console.group(t.type),console.info("dispatching",t);var o=e(t);return console.log("next state",n.getState()),console.groupEnd(),o}}},h=t(10),f=t(2),m=t(1),p=function(n,e){for(var t=[],o=n.charCodeAt(0),r=e.charCodeAt(0);o<=r;++o)t.push(String.fromCharCode(o));if(0===t.length)throw new Error("Unexpected begin [".concat(n,"] and end [").concat(e,"] characters"));return t},w=Number(1.071428571428571),T=Number(.933333333333333),v=Number(.949367088607595),E="".concat("a").concat("1"),_="".concat("i").concat("1"),O="".concat("i").concat("9"),g="".concat("a").concat("9"),b="".concat("m").concat("1"),S="".concat("m").concat("13"),C="".concat("a").concat("13"),N="".concat("s").concat("1"),x="".concat("s").concat("19"),y="".concat("a").concat("19"),M=[E,_,O,g],A=["".concat("a").concat("1"),"".concat("a").concat("13"),"".concat("m").concat("1"),"".concat("m").concat("13")],j=["".concat("a").concat("1"),"".concat("a").concat("19"),"".concat("s").concat("1"),"".concat("s").concat("19")],H=[].concat(Object(f.a)(m.map(m.range(2,9),function(n){return"".concat("a").concat(n)})),Object(f.a)(m.map(m.range(2,9),function(n){return"".concat("i").concat(n)})),Object(f.a)(m.map(p("b","h"),function(n){return"".concat(n,"9")})),Object(f.a)(m.map(p("b","h"),function(n){return"".concat(n,"1")}))),k=[].concat(Object(f.a)(m.map(m.range(2,13),function(n){return"".concat("a").concat(n)})),Object(f.a)(m.map(m.range(2,13),function(n){return"".concat("m").concat(n)})),Object(f.a)(m.map(p("b","l"),function(n){return"".concat(n,"13")})),Object(f.a)(m.map(p("b","l"),function(n){return"".concat(n,"1")}))),W=[].concat(Object(f.a)(m.map(m.range(2,19),function(n){return"".concat("a").concat(n)})),Object(f.a)(m.map(m.range(2,19),function(n){return"".concat("s").concat(n)})),Object(f.a)(m.map(p("b","r"),function(n){return"".concat(n,"19")})),Object(f.a)(m.map(p("b","r"),function(n){return"".concat(n,"1")}))),R=m.map(m.range(1,10),function(n){return m.map(p("a","i"),function(e){return"".concat(e).concat(n)})}),G=m.map(m.range(1,14),function(n){return m.map(p("a","m"),function(e){return"".concat(e).concat(n)})}),I=m.map(m.range(1,20),function(n){return m.map(p("a","s"),function(e){return"".concat(e).concat(n)})}),D=(m.map(m.range(1,10),function(){return m.map(p("a","i"),function(){return"STONE_NONE"})}),m.map(m.range(1,14),function(){return m.map(p("a","m"),function(){return"STONE_NONE"})}),m.map(m.range(1,20),function(){return m.map(p("a","s"),function(){return"STONE_NONE"})}),t(15)),U=function(n,e){if(E===e)return"NORTH_WEST";if("GAME_9_x_9"===n){if(g===e)return"SOUTH_WEST";if(_===e)return"NORTH_EAST";if(O===e)return"SOUTH_EAST";if("a"===e[0])return"WEST";if("1"===e.substring(1))return"NORTH";if("i"===e[0])return"EAST";if("9"===e.substring(1))return"SOUTH";throw new Error('Avast ye matey, shouldn"nt be branching to this island in 9 x 9')}if("GAME_13_x_13"===n){if(C===e)return"SOUTH_WEST";if(b===e)return"NORTH_EAST";if(S===e)return"SOUTH_EAST";if("a"===e[0])return"WEST";if("1"===e.substring(1))return"NORTH";if("m"===e[0])return"EAST";if("13"===e.substring(1))return"SOUTH";throw new Error('Avast ye matey, shouldn"nt be branching to this island in 13 x 13')}if("GAME_19_x_19"===n){if(y===e)return"SOUTH_WEST";if(N===e)return"NORTH_EAST";if(x===e)return"SOUTH_EAST";if("a"===e[0])return"WEST";if("1"===e.substring(1))return"NORTH";if("s"===e[0])return"EAST";if("19"===e.substring(1))return"SOUTH";throw new Error('Avast ye matey, shouldn"nt be branching to this island in 19 x 19')}},P=function(n){var e=n.mode,t=n.colCoordinate,o=n.rowCoordinate;return m.values(function(n){var e,t=n.mode,o=n.colCoordinate,r=n.rowCoordinate;"GAME_9_x_9"===t?e=R:"GAME_13_x_13"===t?e=G:"GAME_19_x_19"===t&&(e=I);var a=e.length-1,i=parseInt(o.charCodeAt(0)-97),c=parseInt(r)-1,u={};return c>=1&&(u.north=e[c-1][i]),i<a&&(u.east=e[c][i+1]),c<a&&(u.south=e[c+1][i]),i>=1&&(u.west=e[c][i-1]),u}({mode:e,colCoordinate:t,rowCoordinate:o}))},B={mode:"GAME_9_x_9"},L=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_MODE":var t=e.payload.mode;return Object(h.a)({},B,{mode:t});case"SET_STONE":var o=e.payload,r=o.colCoordinate,a=o.rowCoordinate,i=o.color,c=function(n){for(var e=n.existingStones,t=n.mode,o=n.newStoneColor,r=n.newStoneColCoordinate,a=n.newStoneRowCoordinate,i="STONE_BLACK"===o?"STONE_WHITE":"STONE_BLACK",c=m.assign({},e,Object(D.a)({},"".concat(r).concat(a),o)),u=m.filter(P({mode:t,colCoordinate:r,rowCoordinate:a}),function(n){return c[n]===i}),s=[];0!==u.length;)s.push.apply(s,u),u=m.flatMap(u,function(n){return m.filter(P({mode:t,colCoordinate:n[0],rowCoordinate:n.substring(1)}),function(n){return!m.includes(s,n)&&c[n]===i})});for(var d=[],l=0,h=s;l<h.length;l++){var f=h[l];u=m.filter(P({mode:t,colCoordinate:f[0],rowCoordinate:f.substring(1)}),function(n){return!m.includes(s,n)&&(!c[n]||"STONE_NONE"===c[n])}),d.push.apply(d,u)}return d.length>0?c:m.omit(c,s)}({existingStones:n,mode:n.mode,newStoneColor:i,newStoneColCoordinate:r,newStoneRowCoordinate:a});return Object(h.a)({mode:n.mode},c);default:return n}},K={canRender:!1,mode:"GAME_9_x_9",turnColor:"TURN_BLACK",turnNumber:1,windowHeight:null,windowWidth:null,configurationHeight:null,blackCaptures:0,whiteCaptures:0},J=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_MODE":return Object(h.a)({},n,{mode:e.payload.mode,turnNumber:1,blackCaptures:0,whiteCaptures:0});case"SET_STONE":return Object(h.a)({},n,{turnColor:"TURN_BLACK"===n.turnColor?"TURN_WHITE":"TURN_BLACK",turnNumber:n.turnNumber+1});case"SET_WINDOW_DIMENSIONS":var t=e.payload,o=t.windowHeight,r=t.windowWidth;return Object(h.a)({},n,{canRender:!0,windowHeight:o,windowWidth:r});case"SET_CONFIGURATION_HEIGHT":var a=e.payload.configurationHeight;return Object(h.a)({},n,{configurationHeight:a});default:return n}};var z=t(5),F=t(6),q=t(8),Q=t(7),V=t(3),X=t(9),Y=t(24),Z=Object(Y.a)(function(n,e){return n.board["".concat(e.colCoordinate).concat(e.rowCoordinate)]},function(n){return n||"STONE_NONE"}),$=function(n){function e(n){var t;return Object(z.a)(this,e),(t=Object(q.a)(this,Object(Q.a)(e).call(this,n))).showPreviewStone=t.showPreviewStone.bind(Object(V.a)(t)),t.clearCanvas=t.clearCanvas.bind(Object(V.a)(t)),t.drawTile=t.drawTile.bind(Object(V.a)(t)),t.onClick=t.onClick.bind(Object(V.a)(t)),t.onMouseOver=t.onMouseOver.bind(Object(V.a)(t)),t.onMouseOut=t.onMouseOut.bind(Object(V.a)(t)),t}return Object(X.a)(e,n),Object(F.a)(e,[{key:"componentDidMount",value:function(){this.drawTile()}},{key:"componentDidUpdate",value:function(){this.drawTile()}},{key:"drawTile",value:function(){var n=this.props,e=n.mode,t=n.rowCoordinate,o=n.colCoordinate;"STONE_NONE"===n.stonePlaced?this.clearCanvas():this.drawStone(),!function(n){return"GAME_9_x_9"===n?M:"GAME_13_x_13"===n?A:"GAME_19_x_19"===n?j:void 0}(e).includes("".concat(o).concat(t))?!function(n){return"GAME_9_x_9"===n?H:"GAME_13_x_13"===n?k:"GAME_19_x_19"===n?W:void 0}(e).includes("".concat(o).concat(t))?this.drawIntersection():this.drawSide():this.drawCorner()}},{key:"drawSide",value:function(){var n=this.props,e=n.height,t=n.mode,o=n.width,r=n.rowCoordinate,a=n.colCoordinate,i=this.refs.canvas.getContext("2d"),c=U(t,"".concat(a).concat(r)),u=o/2,s=e/2;i.beginPath(),i.font="18px monospace","WEST"===c?(i.moveTo(u,0),i.lineTo(u,e),i.moveTo(u,s),i.lineTo(o,s),i.fillText(r,0,s)):"NORTH"===c?(i.moveTo(0,s),i.lineTo(o,s),i.moveTo(u,s),i.lineTo(u,e),i.fillText(a,u,18)):"EAST"===c?(i.moveTo(u,0),i.lineTo(u,e),i.moveTo(0,s),i.lineTo(u,s),i.fillText(r,o-20,s)):"SOUTH"===c&&(i.moveTo(0,s),i.lineTo(o,s),i.moveTo(u,0),i.lineTo(u,s),i.fillText(a,u,e-20)),i.stroke()}},{key:"drawCorner",value:function(){var n=this.props,e=n.height,t=n.mode,o=n.width,r=n.rowCoordinate,a=n.colCoordinate,i=this.refs.canvas.getContext("2d"),c=U(t,"".concat(a).concat(r)),u=o/2,s=e/2;i.beginPath(),i.font="18px monospace","NORTH_EAST"===c?(i.moveTo(0,s),i.lineTo(u,s),i.lineTo(u,e),i.fillText(a,u,18),i.fillText(r,o-20,s)):"SOUTH_EAST"===c?(i.moveTo(u,0),i.lineTo(u,s),i.lineTo(0,s),i.fillText(a,u,e-20),i.fillText(r,o-20,s)):"SOUTH_WEST"===c?(i.moveTo(o,s),i.lineTo(u,s),i.lineTo(u,0),i.fillText(a,u,e-20),i.fillText(r,0,s)):"NORTH_WEST"===c&&(i.moveTo(u,e),i.lineTo(u,s),i.lineTo(o,s),i.fillText(a,u,18),i.fillText(r,0,s)),i.stroke()}},{key:"drawIntersection",value:function(){var n=this.props,e=n.height,t=n.width,o=this.refs.canvas.getContext("2d"),r=t/2,a=e/2;o.beginPath(),o.moveTo(0,a),o.lineTo(t,a),o.moveTo(r,0),o.lineTo(r,e),o.stroke()}},{key:"drawStone",value:function(){var n=this.props.stonePlaced;this.drawStoneInternal("STONE_BLACK"===n)}},{key:"drawStoneInternal",value:function(n){var e=this.props,t=e.height,o=e.stoneRadius,r=e.width,a=this.refs.canvas.getContext("2d"),i=r/2,c=t/2;a.beginPath(),a.arc(i,c,o,0,2*Math.PI),n&&(a.fillStyle="#000000",a.fill()),a.stroke()}},{key:"showPreviewStone",value:function(){var n=this.props.turnColor;this.drawStoneInternal("TURN_BLACK"===n)}},{key:"clearCanvas",value:function(){var n=this.props,e=n.height,t=n.width;this.refs.canvas.getContext("2d").clearRect(0,0,t,e)}},{key:"onMouseOver",value:function(){"STONE_NONE"===this.props.stonePlaced&&this.showPreviewStone()}},{key:"onMouseOut",value:function(){"STONE_NONE"===this.props.stonePlaced&&(this.clearCanvas(),this.drawTile())}},{key:"onClick",value:function(){"STONE_NONE"===this.props.stonePlaced&&this.props.setStone()}},{key:"render",value:function(){var n=this.props,e=n.height,t=n.width;return r.a.createElement("canvas",{height:e,width:t,ref:"canvas",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.onClick})}}]),e}(o.Component),nn=Object(c.b)(function(n,e){return{stonePlaced:Z(n,e),turnColor:n.game.turnColor}},function(n,e){var t=e.colCoordinate,o=e.rowCoordinate;return{setStone:function(){n(function(n,e){return function(t,o){var r=o().game.turnColor;t(function(n,e,t){return{type:"SET_STONE",payload:{colCoordinate:n,rowCoordinate:e,color:t}}}(n,e,"TURN_BLACK"===r?"STONE_BLACK":"STONE_WHITE"))}}(t,o))}}})($),en=function(n){function e(){return Object(z.a)(this,e),Object(q.a)(this,Object(Q.a)(e).apply(this,arguments))}return Object(X.a)(e,n),Object(F.a)(e,[{key:"getCoordinates",value:function(){var n=this.props.mode;if("GAME_9_x_9"===n)return R;if("GAME_13_x_13"===n)return G;if("GAME_19_x_19"===n)return I;throw new Error("No known mode selected")}},{key:"renderRow",value:function(n){var e=this.props,t=e.mode,o=e.stoneRadius,a=e.tileDimensions,i=n[0].substring(1);return r.a.createElement("div",{key:"".concat(t).concat(i),className:"flex-container"},m.map(n,function(n){var e=n[0];return r.a.createElement(nn,{key:"".concat(t).concat(e).concat(i),colCoordinate:e,rowCoordinate:i,height:a.height,stoneRadius:o,width:a.width,mode:t})}))}},{key:"render",value:function(){var n=this,e=this.getCoordinates();return r.a.createElement("div",{id:"board"},m.map(e,function(e){return n.renderRow(e)}))}}]),e}(o.Component),tn=Object(c.b)(function(n){var e,t=n.game,o=t.mode,r=t.windowHeight,a=t.windowWidth,i=t.configurationHeight,c=function(n){var e=n.configurationHeight,t=n.windowHeight,o=n.windowWidth,r=(t-e)*T,a=(r=o>r?r:o-10)*w;return{height:Math.floor(a),width:Math.floor(r)}}({configurationHeight:i,windowHeight:r,windowWidth:a}),u=function(n){var e=n.mode,t=n.boardHeight,o=n.boardWidth,r=0;if("GAME_9_x_9"===e)r=Number(1/9);else if("GAME_13_x_13"===e)r=Number(1/13);else{if("GAME_19_x_19"!==e)throw new Error("No known mode");r=Number(1/19)}var a=Math.floor(t*r),i=Math.floor(o*r);return{height:a%2===0?a:a-1,width:i%2===0?i:i-1}}({mode:o,boardHeight:c.height,boardWidth:c.width}),s=(e=u.height,Math.floor(e*v/2));return console.log("Configuration height: ".concat(i,", Window width: ").concat(a,", window height: ").concat(r,", calculated tile dims: ").concat(JSON.stringify(u))),{mode:o,stoneRadius:s,tileDimensions:u}})(en),on=function(n){function e(){return Object(z.a)(this,e),Object(q.a)(this,Object(Q.a)(e).apply(this,arguments))}return Object(X.a)(e,n),Object(F.a)(e,[{key:"componentDidMount",value:function(){var n=this.props,e=n.configurationHeight,t=n.setConfigurationHeight;e||t(document.getElementById("configuration").clientHeight)}},{key:"getHumanReadableMode",value:function(){var n=this.props.mode;if("GAME_9_x_9"===n)return"9 x 9";if("GAME_13_x_13"===n)return"13 x 13";if("GAME_19_x_19"===n)return"19 x 19";throw new Error("No known mode selected")}},{key:"render",value:function(){var n=this.props,e=n.mode,t=n.setMode;return r.a.createElement("div",{id:"configuration"},r.a.createElement("h1",null,"Go Demo Board"),r.a.createElement("div",{className:"flex-container"},r.a.createElement("div",null,r.a.createElement("h4",null,"Mode: ",this.getHumanReadableMode()),r.a.createElement("h4",null,"Turn Number: ",this.props.turnNumber)),r.a.createElement("form",null,r.a.createElement("select",{onChange:function(n){return t(n.target.value)},value:e},r.a.createElement("option",{value:"GAME_9_x_9"},"9 x 9"),r.a.createElement("option",{value:"GAME_13_x_13"},"13 x 13"),r.a.createElement("option",{value:"GAME_19_x_19"},"19 x 19")))))}}]),e}(o.Component),rn=Object(c.b)(function(n){return{mode:n.game.mode,turnNumber:n.game.turnNumber,configurationHeight:n.game.configurationHeight}},function(n){return{setMode:function(e){n(function(n){return{type:"SET_MODE",payload:{mode:n}}}(e))},setConfigurationHeight:function(e){n({type:"SET_CONFIGURATION_HEIGHT",payload:{configurationHeight:e}})}}})(on),an=(t(35),function(n){function e(n){var t;return Object(z.a)(this,e),(t=Object(q.a)(this,Object(Q.a)(e).call(this,n))).updateWindowDimensions=t.updateWindowDimensions.bind(Object(V.a)(t)),t}return Object(X.a)(e,n),Object(F.a)(e,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.props.setWindowDimensions(window.innerWidth,window.innerHeight)}},{key:"render",value:function(){var n=this.props.canRender;return r.a.createElement("div",{className:"App"},r.a.createElement(rn,null),n&&r.a.createElement(tn,null),!n&&r.a.createElement("h1",null,"Please wait..."))}}]),e}(o.Component)),cn=Object(c.b)(function(n){var e=n.game,t=e.canRender;return{mode:e.mode,canRender:t}},function(n){return{setWindowDimensions:function(e,t){n(function(n,e){return{type:"SET_WINDOW_DIMENSIONS",payload:{windowWidth:n,windowHeight:e}}}(e,t))}}})(an),un=function(n){var e=[Object(u.applyMiddleware)(s.a,l)],t=d.composeWithDevTools.apply(void 0,e),o=Object(u.combineReducers)({board:L,game:J});return Object(u.createStore)(o,n,t)}(),sn=document.getElementById("root");i.a.render(r.a.createElement(c.a,{store:un},r.a.createElement(cn,null)),sn)}},[[25,1,2]]]);
//# sourceMappingURL=main.df7c394c.chunk.js.map