(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n(36)},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(14),i=n.n(a),c=n(4),u=n(11),s=n(22),l=n(23),d=function(e){return function(t){return function(n){console.group(n.type),console.info("dispatching",n);var o=t(n);return console.log("next state",e.getState()),console.groupEnd(),o}}},h=n(10),f=n(2),m=n(1),p=function(e,t){for(var n=[],o=e.charCodeAt(0),r=t.charCodeAt(0);o<=r;++o)n.push(String.fromCharCode(o));if(0===n.length)throw new Error("Unexpected begin [".concat(e,"] and end [").concat(t,"] characters"));return n},w=Number(1.071428571428571),v=Number(.933333333333333),T=Number(.949367088607595),E="".concat("a").concat("1"),b="".concat("i").concat("1"),g="".concat("i").concat("9"),_="".concat("a").concat("9"),O="".concat("m").concat("1"),S="".concat("m").concat("13"),C="".concat("a").concat("13"),N="".concat("s").concat("1"),y="".concat("s").concat("19"),x="".concat("a").concat("19"),M=[E,b,g,_],A=["".concat("a").concat("1"),"".concat("a").concat("13"),"".concat("m").concat("1"),"".concat("m").concat("13")],j=["".concat("a").concat("1"),"".concat("a").concat("19"),"".concat("s").concat("1"),"".concat("s").concat("19")],H=[].concat(Object(f.a)(m.map(m.range(2,9),function(e){return"".concat("a").concat(e)})),Object(f.a)(m.map(m.range(2,9),function(e){return"".concat("i").concat(e)})),Object(f.a)(m.map(p("b","h"),function(e){return"".concat(e,"9")})),Object(f.a)(m.map(p("b","h"),function(e){return"".concat(e,"1")}))),k=[].concat(Object(f.a)(m.map(m.range(2,13),function(e){return"".concat("a").concat(e)})),Object(f.a)(m.map(m.range(2,13),function(e){return"".concat("m").concat(e)})),Object(f.a)(m.map(p("b","l"),function(e){return"".concat(e,"13")})),Object(f.a)(m.map(p("b","l"),function(e){return"".concat(e,"1")}))),W=[].concat(Object(f.a)(m.map(m.range(2,19),function(e){return"".concat("a").concat(e)})),Object(f.a)(m.map(m.range(2,19),function(e){return"".concat("s").concat(e)})),Object(f.a)(m.map(p("b","r"),function(e){return"".concat(e,"19")})),Object(f.a)(m.map(p("b","r"),function(e){return"".concat(e,"1")}))),R=m.map(m.range(1,10),function(e){return m.map(p("a","i"),function(t){return"".concat(t).concat(e)})}),G=m.map(m.range(1,14),function(e){return m.map(p("a","m"),function(t){return"".concat(t).concat(e)})}),I=m.map(m.range(1,20),function(e){return m.map(p("a","s"),function(t){return"".concat(t).concat(e)})}),D=(m.map(m.range(1,10),function(){return m.map(p("a","i"),function(){return"STONE_NONE"})}),m.map(m.range(1,14),function(){return m.map(p("a","m"),function(){return"STONE_NONE"})}),m.map(m.range(1,20),function(){return m.map(p("a","s"),function(){return"STONE_NONE"})}),n(15)),U=function(e,t){if(E===t)return"NORTH_WEST";if("GAME_9_x_9"===e){if(_===t)return"SOUTH_WEST";if(b===t)return"NORTH_EAST";if(g===t)return"SOUTH_EAST";if("a"===t[0])return"WEST";if("1"===t.substring(1))return"NORTH";if("i"===t[0])return"EAST";if("9"===t.substring(1))return"SOUTH";throw new Error('Avast ye matey, shouldn"nt be branching to this island in 9 x 9')}if("GAME_13_x_13"===e){if(C===t)return"SOUTH_WEST";if(O===t)return"NORTH_EAST";if(S===t)return"SOUTH_EAST";if("a"===t[0])return"WEST";if("1"===t.substring(1))return"NORTH";if("m"===t[0])return"EAST";if("13"===t.substring(1))return"SOUTH";throw new Error('Avast ye matey, shouldn"nt be branching to this island in 13 x 13')}if("GAME_19_x_19"===e){if(x===t)return"SOUTH_WEST";if(N===t)return"NORTH_EAST";if(y===t)return"SOUTH_EAST";if("a"===t[0])return"WEST";if("1"===t.substring(1))return"NORTH";if("s"===t[0])return"EAST";if("19"===t.substring(1))return"SOUTH";throw new Error('Avast ye matey, shouldn"nt be branching to this island in 19 x 19')}},B=function(e){var t,n=e.mode,o=e.colCoordinate,r=e.rowCoordinate;"GAME_9_x_9"===n?t=R:"GAME_13_x_13"===n?t=G:"GAME_19_x_19"===n&&(t=I);var a=t.length-1,i=parseInt(o.charCodeAt(0)-97),c=parseInt(r)-1,u={};return c>=1&&(u.north=t[c-1][i]),i<a&&(u.east=t[c][i+1]),c<a&&(u.south=t[c+1][i]),i>=1&&(u.west=t[c][i-1]),u},P=function(e){var t=e.mode,n=e.colCoordinate,o=e.rowCoordinate;return m.values(B({mode:t,colCoordinate:n,rowCoordinate:o}))},L={mode:"GAME_9_x_9",koWarning:!1,currentBoardState:{},previousBoardState:{}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MODE":var n=t.payload.mode;return Object(h.a)({},L,{mode:n});case"SET_STONE":var o=t.payload,r=o.colCoordinate,a=o.rowCoordinate,i=o.color,c=function(e){var t=e.existingStones,n=e.mode,o=e.newStoneColor,r=e.newStoneColCoordinate,a=e.newStoneRowCoordinate,i="STONE_BLACK"===o?"STONE_WHITE":"STONE_BLACK",c=m.assign({},t,Object(D.a)({},"".concat(r).concat(a),o)),u=B({mode:n,colCoordinate:r,rowCoordinate:a}),s=[],l={north:{stones:[],liberties:[]},east:{stones:[],liberties:[]},south:{stones:[],liberties:[]},west:{stones:[],liberties:[]}},d=function(e){for(var t in l)if(m.includes(l[t].stones,e))return!0;return!1},h=function(e){return!d(e)&&c[e]===i};for(var f in u){var p=u[f],w=l[f];h(p)&&(s.push(p),w.stones.push(p));do{s=m.flatMap(s,function(e){return m.filter(P({mode:n,colCoordinate:e[0],rowCoordinate:e.substring(1)}),h)}),w.stones.push.apply(w.stones,s)}while(0!==s.length)}for(var v in l){var T=l[v],E=!0,b=!1,g=void 0;try{for(var _,O=T.stones[Symbol.iterator]();!(E=(_=O.next()).done);E=!0){var S=_.value;s=m.filter(P({mode:n,colCoordinate:S[0],rowCoordinate:S.substring(1)}),function(e){return!d(e)&&(!c[e]||"STONE_NONE"===c[e])}),T.liberties.push.apply(T.liberties,s)}}catch(M){b=!0,g=M}finally{try{E||null==O.return||O.return()}finally{if(b)throw g}}}var C=[],N=0;for(var y in l){var x=l[y];0===x.liberties.length?C.push.apply(C,x.stones):x.stones.length>0&&N++}return N===m.keys(u).length?t:m.omit(c,C)}({existingStones:e.currentBoardState,mode:e.mode,newStoneColor:i,newStoneColCoordinate:r,newStoneRowCoordinate:a}),u=m.isEqual(e.previousBoardState,c);return u?Object(h.a)({},e,{koWarning:u}):{mode:e.mode,koWarning:u,currentBoardState:c,previousBoardState:e.currentBoardState};default:return e}},J={canRender:!1,mode:"GAME_9_x_9",turnColor:"TURN_BLACK",turnNumber:1,windowHeight:null,windowWidth:null,configurationHeight:null,blackCaptures:0,whiteCaptures:0},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MODE":return Object(h.a)({},e,{mode:t.payload.mode,turnNumber:1,blackCaptures:0,whiteCaptures:0});case"SET_STONE":return Object(h.a)({},e,{turnColor:"TURN_BLACK"===e.turnColor?"TURN_WHITE":"TURN_BLACK",turnNumber:e.turnNumber+1});case"SET_WINDOW_DIMENSIONS":var n=t.payload,o=n.windowHeight,r=n.windowWidth;return Object(h.a)({},e,{canRender:!0,windowHeight:o,windowWidth:r});case"SET_CONFIGURATION_HEIGHT":var a=t.payload.configurationHeight;return Object(h.a)({},e,{configurationHeight:a});default:return e}};var F=n(5),q=n(6),Q=n(8),V=n(7),X=n(3),Y=n(9),Z=n(24),$=Object(Z.a)(function(e,t){return e.board.currentBoardState["".concat(t.colCoordinate).concat(t.rowCoordinate)]},function(e){return e||"STONE_NONE"}),ee=function(e){function t(e){var n;return Object(F.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).showPreviewStone=n.showPreviewStone.bind(Object(X.a)(n)),n.clearCanvas=n.clearCanvas.bind(Object(X.a)(n)),n.drawTile=n.drawTile.bind(Object(X.a)(n)),n.onClick=n.onClick.bind(Object(X.a)(n)),n.onMouseOver=n.onMouseOver.bind(Object(X.a)(n)),n.onMouseOut=n.onMouseOut.bind(Object(X.a)(n)),n}return Object(Y.a)(t,e),Object(q.a)(t,[{key:"componentDidMount",value:function(){this.drawTile()}},{key:"componentDidUpdate",value:function(){this.drawTile()}},{key:"drawTile",value:function(){var e=this.props,t=e.mode,n=e.rowCoordinate,o=e.colCoordinate;"STONE_NONE"===e.stonePlaced?this.clearCanvas():this.drawStone(),!function(e){return"GAME_9_x_9"===e?M:"GAME_13_x_13"===e?A:"GAME_19_x_19"===e?j:void 0}(t).includes("".concat(o).concat(n))?!function(e){return"GAME_9_x_9"===e?H:"GAME_13_x_13"===e?k:"GAME_19_x_19"===e?W:void 0}(t).includes("".concat(o).concat(n))?this.drawIntersection():this.drawSide():this.drawCorner()}},{key:"drawSide",value:function(){var e=this.props,t=e.height,n=e.mode,o=e.width,r=e.rowCoordinate,a=e.colCoordinate,i=this.refs.canvas.getContext("2d"),c=U(n,"".concat(a).concat(r)),u=o/2,s=t/2;i.beginPath(),i.font="18px monospace","WEST"===c?(i.moveTo(u,0),i.lineTo(u,t),i.moveTo(u,s),i.lineTo(o,s),i.fillText(r,0,s)):"NORTH"===c?(i.moveTo(0,s),i.lineTo(o,s),i.moveTo(u,s),i.lineTo(u,t),i.fillText(a,u,18)):"EAST"===c?(i.moveTo(u,0),i.lineTo(u,t),i.moveTo(0,s),i.lineTo(u,s),i.fillText(r,o-20,s)):"SOUTH"===c&&(i.moveTo(0,s),i.lineTo(o,s),i.moveTo(u,0),i.lineTo(u,s),i.fillText(a,u,t-20)),i.stroke()}},{key:"drawCorner",value:function(){var e=this.props,t=e.height,n=e.mode,o=e.width,r=e.rowCoordinate,a=e.colCoordinate,i=this.refs.canvas.getContext("2d"),c=U(n,"".concat(a).concat(r)),u=o/2,s=t/2;i.beginPath(),i.font="18px monospace","NORTH_EAST"===c?(i.moveTo(0,s),i.lineTo(u,s),i.lineTo(u,t),i.fillText(a,u,18),i.fillText(r,o-20,s)):"SOUTH_EAST"===c?(i.moveTo(u,0),i.lineTo(u,s),i.lineTo(0,s),i.fillText(a,u,t-20),i.fillText(r,o-20,s)):"SOUTH_WEST"===c?(i.moveTo(o,s),i.lineTo(u,s),i.lineTo(u,0),i.fillText(a,u,t-20),i.fillText(r,0,s)):"NORTH_WEST"===c&&(i.moveTo(u,t),i.lineTo(u,s),i.lineTo(o,s),i.fillText(a,u,18),i.fillText(r,0,s)),i.stroke()}},{key:"drawIntersection",value:function(){var e=this.props,t=e.height,n=e.width,o=this.refs.canvas.getContext("2d"),r=n/2,a=t/2;o.beginPath(),o.moveTo(0,a),o.lineTo(n,a),o.moveTo(r,0),o.lineTo(r,t),o.stroke()}},{key:"drawStone",value:function(){var e=this.props.stonePlaced;this.drawStoneInternal("STONE_BLACK"===e)}},{key:"drawStoneInternal",value:function(e){var t=this.props,n=t.height,o=t.stoneRadius,r=t.width,a=this.refs.canvas.getContext("2d"),i=r/2,c=n/2;a.beginPath(),a.arc(i,c,o,0,2*Math.PI),e&&(a.fillStyle="#000000",a.fill()),a.stroke()}},{key:"showPreviewStone",value:function(){var e=this.props.turnColor;this.drawStoneInternal("TURN_BLACK"===e)}},{key:"clearCanvas",value:function(){var e=this.props,t=e.height,n=e.width;this.refs.canvas.getContext("2d").clearRect(0,0,n,t)}},{key:"onMouseOver",value:function(){"STONE_NONE"===this.props.stonePlaced&&this.showPreviewStone()}},{key:"onMouseOut",value:function(){"STONE_NONE"===this.props.stonePlaced&&(this.clearCanvas(),this.drawTile())}},{key:"onClick",value:function(){"STONE_NONE"===this.props.stonePlaced&&this.props.setStone()}},{key:"render",value:function(){var e=this.props,t=e.height,n=e.width;return r.a.createElement("canvas",{height:t,width:n,ref:"canvas",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.onClick})}}]),t}(o.Component),te=Object(c.b)(function(e,t){return{stonePlaced:$(e,t),turnColor:e.game.turnColor}},function(e,t){var n=t.colCoordinate,o=t.rowCoordinate;return{setStone:function(){e(function(e,t){return function(n,o){var r=o().game.turnColor;n(function(e,t,n){return{type:"SET_STONE",payload:{colCoordinate:e,rowCoordinate:t,color:n}}}(e,t,"TURN_BLACK"===r?"STONE_BLACK":"STONE_WHITE"))}}(n,o))}}})(ee),ne=function(e){function t(){return Object(F.a)(this,t),Object(Q.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(Y.a)(t,e),Object(q.a)(t,[{key:"getCoordinates",value:function(){var e=this.props.mode;if("GAME_9_x_9"===e)return R;if("GAME_13_x_13"===e)return G;if("GAME_19_x_19"===e)return I;throw new Error("No known mode selected")}},{key:"renderRow",value:function(e){var t=this.props,n=t.mode,o=t.stoneRadius,a=t.tileDimensions,i=e[0].substring(1);return r.a.createElement("div",{key:"".concat(n).concat(i),className:"flex-container"},m.map(e,function(e){var t=e[0];return r.a.createElement(te,{key:"".concat(n).concat(t).concat(i),colCoordinate:t,rowCoordinate:i,height:a.height,stoneRadius:o,width:a.width,mode:n})}))}},{key:"render",value:function(){var e=this,t=this.getCoordinates();return r.a.createElement("div",{id:"board"},m.map(t,function(t){return e.renderRow(t)}))}}]),t}(o.Component),oe=Object(c.b)(function(e){var t,n=e.game,o=n.mode,r=n.windowHeight,a=n.windowWidth,i=n.configurationHeight,c=function(e){var t=e.configurationHeight,n=e.windowHeight,o=e.windowWidth,r=(n-t)*v,a=(r=o>r?r:o-10)*w;return{height:Math.floor(a),width:Math.floor(r)}}({configurationHeight:i,windowHeight:r,windowWidth:a}),u=function(e){var t=e.mode,n=e.boardHeight,o=e.boardWidth,r=0;if("GAME_9_x_9"===t)r=Number(1/9);else if("GAME_13_x_13"===t)r=Number(1/13);else{if("GAME_19_x_19"!==t)throw new Error("No known mode");r=Number(1/19)}var a=Math.floor(n*r),i=Math.floor(o*r);return{height:a%2===0?a:a-1,width:i%2===0?i:i-1}}({mode:o,boardHeight:c.height,boardWidth:c.width}),s=(t=u.height,Math.floor(t*T/2));return console.log("Configuration height: ".concat(i,", Window width: ").concat(a,", window height: ").concat(r,", calculated tile dims: ").concat(JSON.stringify(u))),{mode:o,stoneRadius:s,tileDimensions:u}})(ne),re=function(e){function t(){return Object(F.a)(this,t),Object(Q.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(Y.a)(t,e),Object(q.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.configurationHeight,n=e.setConfigurationHeight;t||n(document.getElementById("configuration").clientHeight)}},{key:"getHumanReadableMode",value:function(){var e=this.props.mode;if("GAME_9_x_9"===e)return"9 x 9";if("GAME_13_x_13"===e)return"13 x 13";if("GAME_19_x_19"===e)return"19 x 19";throw new Error("No known mode selected")}},{key:"render",value:function(){var e=this.props,t=e.mode,n=e.setMode;return r.a.createElement("div",{id:"configuration"},r.a.createElement("h1",null,"Go Demo Board"),r.a.createElement("div",{className:"flex-container"},r.a.createElement("div",null,r.a.createElement("h4",null,"Mode: ",this.getHumanReadableMode()),r.a.createElement("h4",null,"Turn Number: ",this.props.turnNumber)),r.a.createElement("form",null,r.a.createElement("select",{onChange:function(e){return n(e.target.value)},value:t},r.a.createElement("option",{value:"GAME_9_x_9"},"9 x 9"),r.a.createElement("option",{value:"GAME_13_x_13"},"13 x 13"),r.a.createElement("option",{value:"GAME_19_x_19"},"19 x 19")))))}}]),t}(o.Component),ae=Object(c.b)(function(e){return{mode:e.game.mode,turnNumber:e.game.turnNumber,configurationHeight:e.game.configurationHeight}},function(e){return{setMode:function(t){e(function(e){return{type:"SET_MODE",payload:{mode:e}}}(t))},setConfigurationHeight:function(t){e({type:"SET_CONFIGURATION_HEIGHT",payload:{configurationHeight:t}})}}})(re),ie=(n(35),function(e){function t(e){var n;return Object(F.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).updateWindowDimensions=n.updateWindowDimensions.bind(Object(X.a)(n)),n}return Object(Y.a)(t,e),Object(q.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.props.setWindowDimensions(window.innerWidth,window.innerHeight)}},{key:"render",value:function(){var e=this.props.canRender;return r.a.createElement("div",{className:"App"},r.a.createElement(ae,null),e&&r.a.createElement(oe,null),!e&&r.a.createElement("h1",null,"Please wait..."))}}]),t}(o.Component)),ce=Object(c.b)(function(e){var t=e.game,n=t.canRender;return{mode:t.mode,canRender:n}},function(e){return{setWindowDimensions:function(t,n){e(function(e,t){return{type:"SET_WINDOW_DIMENSIONS",payload:{windowWidth:e,windowHeight:t}}}(t,n))}}})(ie),ue=function(e){var t=[Object(u.applyMiddleware)(s.a,d)],n=l.composeWithDevTools.apply(void 0,t),o=Object(u.combineReducers)({board:K,game:z});return Object(u.createStore)(o,e,n)}(),se=document.getElementById("root");i.a.render(r.a.createElement(c.a,{store:ue},r.a.createElement(ce,null)),se)}},[[25,1,2]]]);
//# sourceMappingURL=main.c21f651e.chunk.js.map