(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n(36)},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(14),i=n.n(a),c=n(4),u=n(11),s=n(22),l=n(23),d=function(e){return function(t){return function(n){console.group(n.type),console.info("dispatching",n);var o=t(n);return console.log("next state",e.getState()),console.groupEnd(),o}}},h=n(10),f=n(2),m=n(1),v=function(e,t){for(var n=[],o=e.charCodeAt(0),r=t.charCodeAt(0);o<=r;++o)n.push(String.fromCharCode(o));if(0===n.length)throw new Error("Unexpected begin [".concat(e,"] and end [").concat(t,"] characters"));return n},p=Number(1.071428571428571),w=Number(.933333333333333),T=Number(.88),b="".concat("a").concat("1"),_="".concat("i").concat("1"),E="".concat("i").concat("9"),O="".concat("a").concat("9"),S="".concat("m").concat("1"),g="".concat("m").concat("13"),C="".concat("a").concat("13"),N="".concat("s").concat("1"),x="".concat("s").concat("19"),y="".concat("a").concat("19"),A=[b,_,E,O],M=["c3","g3","e5","c7","g7"],j=["".concat("a").concat("1"),"".concat("a").concat("13"),"".concat("m").concat("1"),"".concat("m").concat("13")],k=["d4","j4","g7","j10","d10"],W=["".concat("a").concat("1"),"".concat("a").concat("19"),"".concat("s").concat("1"),"".concat("s").concat("19")],H=["d4","d10","d16","j4","j10","j16","p4","p10","p16"],R=[].concat(Object(f.a)(m.map(m.range(2,9),function(e){return"".concat("a").concat(e)})),Object(f.a)(m.map(m.range(2,9),function(e){return"".concat("i").concat(e)})),Object(f.a)(m.map(v("b","h"),function(e){return"".concat(e,"9")})),Object(f.a)(m.map(v("b","h"),function(e){return"".concat(e,"1")}))),G=[].concat(Object(f.a)(m.map(m.range(2,13),function(e){return"".concat("a").concat(e)})),Object(f.a)(m.map(m.range(2,13),function(e){return"".concat("m").concat(e)})),Object(f.a)(m.map(v("b","l"),function(e){return"".concat(e,"13")})),Object(f.a)(m.map(v("b","l"),function(e){return"".concat(e,"1")}))),P=[].concat(Object(f.a)(m.map(m.range(2,19),function(e){return"".concat("a").concat(e)})),Object(f.a)(m.map(m.range(2,19),function(e){return"".concat("s").concat(e)})),Object(f.a)(m.map(v("b","r"),function(e){return"".concat(e,"19")})),Object(f.a)(m.map(v("b","r"),function(e){return"".concat(e,"1")}))),D=m.map(m.range(1,10),function(e){return m.map(v("a","i"),function(t){return"".concat(t).concat(e)})}),U=m.map(m.range(1,14),function(e){return m.map(v("a","m"),function(t){return"".concat(t).concat(e)})}),B=m.map(m.range(1,20),function(e){return m.map(v("a","s"),function(t){return"".concat(t).concat(e)})}),I={mode:"GAME_9_x_9",koViolation:"",currentBoardState:{},previousBoardState:{}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MODE":var n=t.payload.mode;return Object(h.a)({},I,{mode:n});case"UPDATE_STONES":var o=t.payload.nextBoardState;return Object(h.a)({},e,{koViolation:"",currentBoardState:o,previousBoardState:e.currentBoardState});case"KO_WARNING":var r=t.payload,a=r.colCoordinate,i=r.rowCoordinate;return Object(h.a)({},e,{koViolation:"".concat(a).concat(i)});default:return e}},L={canRender:!1,mode:"GAME_9_x_9",turnColor:"TURN_BLACK",turnNumber:1,windowHeight:null,windowWidth:null,blackCaptures:0,whiteCaptures:0},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MODE":return Object(h.a)({},e,{mode:t.payload.mode,turnNumber:1,blackCaptures:0,whiteCaptures:0});case"UPDATE_STONES":return Object(h.a)({},e,{turnColor:"TURN_BLACK"===e.turnColor?"TURN_WHITE":"TURN_BLACK",turnNumber:e.turnNumber+1});case"SET_WINDOW_DIMENSIONS":var n=t.payload,o=n.windowHeight,r=n.windowWidth;return Object(h.a)({},e,{canRender:!0,windowHeight:o,windowWidth:r});default:return e}};var z=n(5),F=n(6),J=n(8),q=n(7),Q=n(3),X=n(9),Y=n(15),Z=function(e,t){if(b===t)return"NORTH_WEST";if("GAME_9_x_9"===e){if(O===t)return"SOUTH_WEST";if(_===t)return"NORTH_EAST";if(E===t)return"SOUTH_EAST";if("a"===t[0])return"WEST";if("1"===t.substring(1))return"NORTH";if("i"===t[0])return"EAST";if("9"===t.substring(1))return"SOUTH";throw new Error('Avast ye matey, shouldn"nt be branching to this island in 9 x 9')}if("GAME_13_x_13"===e){if(C===t)return"SOUTH_WEST";if(S===t)return"NORTH_EAST";if(g===t)return"SOUTH_EAST";if("a"===t[0])return"WEST";if("1"===t.substring(1))return"NORTH";if("m"===t[0])return"EAST";if("13"===t.substring(1))return"SOUTH";throw new Error('Avast ye matey, shouldn"nt be branching to this island in 13 x 13')}if("GAME_19_x_19"===e){if(y===t)return"SOUTH_WEST";if(N===t)return"NORTH_EAST";if(x===t)return"SOUTH_EAST";if("a"===t[0])return"WEST";if("1"===t.substring(1))return"NORTH";if("s"===t[0])return"EAST";if("19"===t.substring(1))return"SOUTH";throw new Error('Avast ye matey, shouldn"nt be branching to this island in 19 x 19')}},$=function(e){var t,n=e.mode,o=e.colCoordinate,r=e.rowCoordinate;"GAME_9_x_9"===n?t=D:"GAME_13_x_13"===n?t=U:"GAME_19_x_19"===n&&(t=B);var a=t.length-1,i=parseInt(o.charCodeAt(0)-97),c=parseInt(r)-1,u={};return c>=1&&(u.north=t[c-1][i]),i<a&&(u.east=t[c][i+1]),c<a&&(u.south=t[c+1][i]),i>=1&&(u.west=t[c][i-1]),u},ee=function(e){var t=e.mode,n=e.colCoordinate,o=e.rowCoordinate;return m.values($({mode:t,colCoordinate:n,rowCoordinate:o}))},te=function(e,t){return function(n,o){var r=o().game,a=r.mode,i=r.turnColor,c=o().board,u=c.currentBoardState,s=c.previousBoardState,l="TURN_BLACK"===i?"STONE_BLACK":"STONE_WHITE",d=function(e){var t=e.existingStones,n=e.mode,o=e.newStoneColor,r=e.newStoneColCoordinate,a=e.newStoneRowCoordinate,i="STONE_BLACK"===o?"STONE_WHITE":"STONE_BLACK",c=m.assign({},t,Object(Y.a)({},"".concat(r).concat(a),o)),u=$({mode:n,colCoordinate:r,rowCoordinate:a}),s=[],l={north:{stones:[],liberties:[]},east:{stones:[],liberties:[]},south:{stones:[],liberties:[]},west:{stones:[],liberties:[]}},d=function(e){for(var t in l)if(m.includes(l[t].stones,e))return!0;return!1},h=function(e){return!d(e)&&c[e]===i};for(var f in u){var v=u[f],p=l[f];h(v)&&(s.push(v),p.stones.push(v));do{s=m.flatMap(s,function(e){return m.filter(ee({mode:n,colCoordinate:e[0],rowCoordinate:e.substring(1)}),h)}),p.stones.push.apply(p.stones,s)}while(0!==s.length)}for(var w in l){var T=l[w],b=!0,_=!1,E=void 0;try{for(var O,S=T.stones[Symbol.iterator]();!(b=(O=S.next()).done);b=!0){var g=O.value;s=m.filter(ee({mode:n,colCoordinate:g[0],rowCoordinate:g.substring(1)}),function(e){return!d(e)&&(!c[e]||"STONE_NONE"===c[e])}),T.liberties.push.apply(T.liberties,s)}}catch(A){_=!0,E=A}finally{try{b||null==S.return||S.return()}finally{if(_)throw E}}}var C=[],N=0;for(var x in l){var y=l[x];0===y.liberties.length?C.push.apply(C,y.stones):y.stones.length>0&&N++}return N===m.keys(u).length?t:m.omit(c,C)}({existingStones:u,mode:a,newStoneColor:l,newStoneColCoordinate:e,newStoneRowCoordinate:t});n(m.isEqual(s,d)?function(e,t,n){return{type:"KO_WARNING",payload:{colCoordinate:e,rowCoordinate:t,color:n}}}(e,t,l):function(e){return{type:"UPDATE_STONES",payload:{nextBoardState:e}}}(d))}},ne=n(24),oe=Object(ne.a)(function(e,t){return e.board.currentBoardState["".concat(t.colCoordinate).concat(t.rowCoordinate)]},function(e){return e||"STONE_NONE"}),re=function(e){function t(e){var n;return Object(z.a)(this,t),(n=Object(J.a)(this,Object(q.a)(t).call(this,e))).showPreviewStone=n.showPreviewStone.bind(Object(Q.a)(n)),n.clearCanvas=n.clearCanvas.bind(Object(Q.a)(n)),n.drawTile=n.drawTile.bind(Object(Q.a)(n)),n.onClick=n.onClick.bind(Object(Q.a)(n)),n.onMouseOver=n.onMouseOver.bind(Object(Q.a)(n)),n.onMouseOut=n.onMouseOut.bind(Object(Q.a)(n)),n}return Object(X.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){this.drawTile()}},{key:"componentDidUpdate",value:function(){this.drawTile()}},{key:"getCanvasContextPresets",value:function(){var e=this.props.isKoViolation,t=this.refs.canvas.getContext("2d");return t.lineWidth=4,e&&(t.strokeStyle="#FF0000"),t}},{key:"drawTile",value:function(){var e=this.props,t=e.mode,n=e.rowCoordinate,o=e.colCoordinate;"STONE_NONE"===e.stonePlaced?this.clearCanvas():this.drawStone(),!function(e){return"GAME_9_x_9"===e?A:"GAME_13_x_13"===e?j:"GAME_19_x_19"===e?W:void 0}(t).includes("".concat(o).concat(n))?!function(e){return"GAME_9_x_9"===e?R:"GAME_13_x_13"===e?G:"GAME_19_x_19"===e?P:void 0}(t).includes("".concat(o).concat(n))?!function(e){return"GAME_9_x_9"===e?M:"GAME_13_x_13"===e?k:"GAME_19_x_19"===e?H:void 0}(t).includes("".concat(o).concat(n))?this.drawIntersection():this.drawStarPoint():this.drawSide():this.drawCorner()}},{key:"drawSide",value:function(){var e=this.props,t=e.height,n=e.mode,o=e.width,r=e.rowCoordinate,a=e.colCoordinate,i=this.getCanvasContextPresets(),c=Z(n,"".concat(a).concat(r)),u=o/2,s=t/2;i.beginPath(),i.font="18px monospace","WEST"===c?(i.moveTo(u,0),i.lineTo(u,t),i.moveTo(u,s),i.lineTo(o,s),i.fillText(r,0,s+4)):"NORTH"===c?(i.moveTo(0,s),i.lineTo(o,s),i.moveTo(u,s),i.lineTo(u,t),i.fillText(a,u,18)):"EAST"===c?(i.moveTo(u,0),i.lineTo(u,t),i.moveTo(0,s),i.lineTo(u,s),i.fillText(r,o-20,s+4)):"SOUTH"===c&&(i.moveTo(0,s),i.lineTo(o,s),i.moveTo(u,0),i.lineTo(u,s),i.fillText(a,u,t-10)),i.stroke()}},{key:"drawCorner",value:function(){var e=this.props,t=e.height,n=e.mode,o=e.width,r=e.rowCoordinate,a=e.colCoordinate,i=this.getCanvasContextPresets(),c=Z(n,"".concat(a).concat(r)),u=o/2,s=t/2;i.beginPath(),i.font="18px monospace","NORTH_EAST"===c?(i.moveTo(0,s),i.lineTo(u,s),i.lineTo(u,t),i.fillText(a,u-4,18),i.fillText(r,o-20,s+4)):"SOUTH_EAST"===c?(i.moveTo(u,0),i.lineTo(u,s),i.lineTo(0,s),i.fillText(a,u-4,t-10),i.fillText(r,o-20,s)):"SOUTH_WEST"===c?(i.moveTo(o,s),i.lineTo(u,s),i.lineTo(u,0),i.fillText(a,u,t-10),i.fillText(r,0,s)):"NORTH_WEST"===c&&(i.moveTo(u,t),i.lineTo(u,s),i.lineTo(o,s),i.fillText(a,u,18),i.fillText(r,0,s)),i.stroke()}},{key:"drawIntersection",value:function(){var e=this.props,t=e.height,n=e.width,o=this.getCanvasContextPresets(),r=n/2,a=t/2;o.beginPath(),o.moveTo(0,a),o.lineTo(n,a),o.moveTo(r,0),o.lineTo(r,t),o.stroke()}},{key:"drawStarPoint",value:function(){var e=this.props,t=e.height,n=e.width,o=this.getCanvasContextPresets(),r=n/2,a=t/2;o.beginPath(),o.arc(r,a,5,0,2*Math.PI),o.fillStyle="#000000",o.fill(),o.moveTo(0,a),o.lineTo(n,a),o.moveTo(r,0),o.lineTo(r,t),o.stroke()}},{key:"drawStone",value:function(){var e=this.props.stonePlaced;this.drawStoneInternal("STONE_BLACK"===e)}},{key:"drawStoneInternal",value:function(e){var t=this.props,n=t.height,o=t.stoneRadius,r=t.width,a=this.refs.canvas.getContext("2d"),i=r/2,c=n/2;a.beginPath(),a.arc(i,c,o,0,2*Math.PI),e&&(a.fillStyle="#000000",a.fill()),a.stroke()}},{key:"showPreviewStone",value:function(){var e=this.props.turnColor;this.drawStoneInternal("TURN_BLACK"===e)}},{key:"clearCanvas",value:function(){var e=this.props,t=e.height,n=e.width;this.refs.canvas.getContext("2d").clearRect(0,0,n,t)}},{key:"onMouseOver",value:function(){"STONE_NONE"===this.props.stonePlaced&&this.showPreviewStone()}},{key:"onMouseOut",value:function(){"STONE_NONE"===this.props.stonePlaced&&(this.clearCanvas(),this.drawTile())}},{key:"onClick",value:function(){"STONE_NONE"===this.props.stonePlaced&&this.props.setStone()}},{key:"render",value:function(){var e=this.props,t=e.height,n=e.width;return r.a.createElement("canvas",{height:t,width:n,ref:"canvas",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.onClick})}}]),t}(o.Component),ae=Object(c.b)(function(e,t){return{stonePlaced:oe(e,t),turnColor:e.game.turnColor}},function(e,t){var n=t.colCoordinate,o=t.rowCoordinate;return{setStone:function(){e(te(n,o))}}})(re),ie=function(e){function t(){return Object(z.a)(this,t),Object(J.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(F.a)(t,[{key:"getCoordinates",value:function(){var e=this.props.mode;if("GAME_9_x_9"===e)return D;if("GAME_13_x_13"===e)return U;if("GAME_19_x_19"===e)return B;throw new Error("No known mode selected")}},{key:"renderRow",value:function(e){var t=this.props,n=t.koViolation,o=t.mode,a=t.stoneRadius,i=t.tileDimensions,c=e[0].substring(1);return r.a.createElement("div",{key:"".concat(o).concat(c),className:"tiles-container"},m.map(e,function(e){var t=e[0];return r.a.createElement(ae,{isKoViolation:n===e,key:"".concat(o).concat(t).concat(c),colCoordinate:t,rowCoordinate:c,height:i.height,stoneRadius:a,width:i.width,mode:o})}))}},{key:"render",value:function(){var e=this,t=this.getCoordinates();return r.a.createElement("div",{id:"board"},m.map(t,function(t){return e.renderRow(t)}))}}]),t}(o.Component),ce=Object(c.b)(function(e){var t,n=e.game,o=n.mode,r=n.windowHeight,a=n.windowWidth,i=e.board.koViolation,c=function(e){var t=e.windowHeight,n=e.windowWidth,o=t*w,r=(o=n>o?o:n-10)*p;return{height:Math.floor(r),width:Math.floor(o)}}({windowHeight:r,windowWidth:a}),u=function(e){var t=e.mode,n=e.boardHeight,o=e.boardWidth,r=0;if("GAME_9_x_9"===t)r=Number(1/9);else if("GAME_13_x_13"===t)r=Number(1/13);else{if("GAME_19_x_19"!==t)throw new Error("No known mode");r=Number(1/19)}var a=Math.floor(n*r),i=Math.floor(o*r);return{height:a%2===0?a:a-1,width:i%2===0?i:i-1}}({mode:o,boardHeight:c.height,boardWidth:c.width});return{koViolation:i,mode:o,stoneRadius:(t=u.height,Math.floor(t*T/2)),tileDimensions:u}})(ie),ue=function(e){function t(){return Object(z.a)(this,t),Object(J.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(F.a)(t,[{key:"getHumanReadableMode",value:function(){var e=this.props.mode;if("GAME_9_x_9"===e)return"9 x 9";if("GAME_13_x_13"===e)return"13 x 13";if("GAME_19_x_19"===e)return"19 x 19";throw new Error("No known mode selected")}},{key:"render",value:function(){var e=this.props,t=e.mode,n=e.setMode;return r.a.createElement("div",{id:"configuration"},r.a.createElement("h1",null,"Go Demo Board"),r.a.createElement("div",{className:"flex-container"},r.a.createElement("div",null,r.a.createElement("h4",null,"Mode: ",this.getHumanReadableMode()),r.a.createElement("h4",null,"Turn Number: ",this.props.turnNumber)),r.a.createElement("form",null,r.a.createElement("select",{onChange:function(e){return n(e.target.value)},value:t},r.a.createElement("option",{value:"GAME_9_x_9"},"9 x 9"),r.a.createElement("option",{value:"GAME_13_x_13"},"13 x 13"),r.a.createElement("option",{value:"GAME_19_x_19"},"19 x 19")))))}}]),t}(o.Component),se=Object(c.b)(function(e){return{mode:e.game.mode,turnNumber:e.game.turnNumber}},function(e){return{setMode:function(t){e(function(e){return{type:"SET_MODE",payload:{mode:e}}}(t))}}})(ue),le=(n(35),function(e){function t(e){var n;return Object(z.a)(this,t),(n=Object(J.a)(this,Object(q.a)(t).call(this,e))).updateWindowDimensions=n.updateWindowDimensions.bind(Object(Q.a)(n)),n}return Object(X.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.props.setWindowDimensions(window.innerWidth,window.innerHeight)}},{key:"render",value:function(){var e=this.props.canRender;return r.a.createElement("div",{className:"App app-container"},r.a.createElement("div",{className:"board-container"},e&&r.a.createElement(ce,null),!e&&r.a.createElement("h1",null,"Please wait...")),r.a.createElement("div",{className:"configuration-container"},r.a.createElement(se,null)))}}]),t}(o.Component)),de=Object(c.b)(function(e){var t=e.game,n=t.canRender;return{mode:t.mode,canRender:n}},function(e){return{setWindowDimensions:function(t,n){e(function(e,t){return{type:"SET_WINDOW_DIMENSIONS",payload:{windowWidth:e,windowHeight:t}}}(t,n))}}})(le),he=function(e){var t=[Object(u.applyMiddleware)(s.a,d)],n=l.composeWithDevTools.apply(void 0,t),o=Object(u.combineReducers)({board:K,game:V});return Object(u.createStore)(o,e,n)}(),fe=document.getElementById("root");i.a.render(r.a.createElement(c.a,{store:he},r.a.createElement(de,null)),fe)}},[[25,1,2]]]);
//# sourceMappingURL=main.8d53ebe1.chunk.js.map